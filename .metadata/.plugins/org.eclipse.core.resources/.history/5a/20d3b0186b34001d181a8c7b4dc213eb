#include "stm32f407xx.h"
// USART1 APB2
// USART1 TX 	PA9
// USART1 RX	PA10
#define GPIOA_EN	(1U << 0)
#define USART1_EN	(1U << 4)



int main()
{

	while(1)
	{

	}
}

void uart1_tx_init(void)
{
	// Clock
	RCC->APB2ENR |= GPIOA_EN;
	// PA9 alternate function mode
	GPIOA->MODER &= ~(1U << 18);
	GPIOA->MODER |= (1U << 19);

	// PA9 UART mode - AF7
	GPIOA->AFR[1] |= (1U << 4);
	GPIOA->AFR[1] |= (1U << 5);
	GPIOA->AFR[1] |= (1U << 6);
	GPIOA->AFR[1] &= ~(1U << 7);

	// uart config
	// clock
	RCC->APB2ENR |= USART1_EN;
	// baud
	// direction


}

static void uart_set_baudrate(USART_TypeDef *USARTx)

static uint16_t compute_uart_div(uint32_t periph_clk, uint32_t baud_rate)
{
	return (periph_clk + (baud_rate / 2U)) / baud_rate;
}
