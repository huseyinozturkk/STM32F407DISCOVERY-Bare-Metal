#include <stdint.h>
#include "stm32f407xx.h"

// USART2 (APB1) TX-> PA2  RX-> PA3
#define USART2_EN
#define CR1_TE			(1U << 3)	// UART Transmit en
#define CR1_UA			(1U << 13)	// UART UART en
#define SR_TXE			(1U << 6)

// GPIOA (AHB1)
#define GPIOA_EN		(1U << 0)

#define SYS_FREQ 		16000000
#define APB1_CLK		SYS_FREQ
#define UART_BAUDRATE 	115200

int main() {



	while(1) {

	}
}


void usart2_tx_init() {
	// ----- gpio config -----
	// gpio clock
	RCC->AHB1ENR |= GPIOA_EN;
	// set gpio AF mode
	GPIOA->MODER = 0xA8000000;  // reset

	GPIOA->MODER |= (1U << 5); // 1
	GPIOA->MODER &= ~(1U << 4); // 0

	// set gpio AF type USART2 - AF7 - b0111
	GPIOA->AFR[0] |= (0x7 << 8); // pin A2
	GPIOA->AFR[0] |= (0x7 << 12); // 	pin A3

	// ----- uart config -----
	// uart clock en

	// uart baudrate

	// uart transfer direction

	// en uart
}

void usart2_write() {
	// is transmit data reg empty

	// write data to tx data reg

}
