#include <stdint.h>
#include <string.h>
#include <stdio.h>

#include "stm32f407xx.h"



void usart2_tx_init(void);
void usart2_write(uint8_t ch);
void usart2_test(uint8_t *pMsg, uint8_t msgLen);

static void uart_set_baudrate(USART_TypeDef *USARTx, uint32_t PeriphClk, uint32_t baudRate);
static uint16_t compute_uart_bd(uint32_t PeriphClk, uint32_t baudRate);

int __io_putchar(int ch) {
	usart2_write(ch);
	return ch;
}

int main() {

	//clock_init();
	//set_clock_168();

	usart2_tx_init();

	// initden sonra delay olmalı, direkt iletim yaparsa ilk byte hatalı gidiyor
	// ayrıca sistem baslangıcınca stm kendi sacma bir sey basıyor
	for(int i = 0; i < 1000000; i++);
	usart2_write('\n');

	uint8_t msg[30] = "ESENLIKLER DUNYA\n";
	usart2_test((uint8_t*)msg, strlen(msg));

	for(int i = 0; i < 1000000; i++);

	while(1) {
		printf("HUSEYIN OZTURK\n\r");

	}
}




